plugins {
    id 'org.openjfx.javafxplugin' version '0.0.7'
    id 'org.beryx.jlink' version '2.10.2'
}

javafx {
    modules = ['javafx.controls', 'javafx.media', 'javafx.graphics']
    version = '12'
}

dependencies {
    compile project(':domain')
}

mainClassName = "$moduleName/guesscharts.java_fx.Gui"
jlink {
    imageZip = file("$buildDir/image-zip/guesscharts.zip")
    options = ['--bind-services', '--strip-debug', '--compress', '2', '--no-header-files', '--no-man-pages']

    if(System.getenv('CI')) {
        ['win', 'linux', 'mac'].each { name ->
            targetPlatform(name) {
                jdkHome = System.getenv('JDK_HOME_' + name.toUpperCase())
                addExtraModulePath(System.getenv('OPENJFX_MODS_' + name.toUpperCase()))
            }
        }
    }

    launcher {
        name = 'Charts Guesser'
    }
}